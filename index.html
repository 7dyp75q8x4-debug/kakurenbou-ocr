<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: sans-serif;
    }

    /* 画面を左右 2 分割 */
    .container {
        display: flex;
        height: 100vh;
        width: 100vw;
    }

    /* 左スロットエリア */
    .left {
        width: 48%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        padding: 4px;
        box-sizing: border-box;
    }

    /* スロット行（1a〜1d など） */
    .slot-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
    }

    /* スロットの見た目 */
    .slot {
        width: 22%;
        aspect-ratio: 1 / 0.9;
        background: #ddd;
        border: 1px solid #aaa;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
    }

    /* 右 UI エリア */
    .right {
        width: 52%;
        padding: 4px;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
    }

    /* カメラ映像（高さ1/4固定） */
    #cameraPreview {
        width: 100%;
        height: 22vh; /* iPhone12Pro で1/4より少し余裕 */
        background: black;
    }

    /* ログ */
    #logBox {
        width: 100%;
        height: 18vh;
        margin-top: 4px;
        background: #eee;
        overflow-y: scroll;
        font-size: 12px;
        padding: 4px;
        box-sizing: border-box;
    }

    /* ボタン共通 */
    .button {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        font-size: 15px;
        border-radius: 6px;
        border: 1px solid #888;
        background: white;
        text-align: center;
    }

    /* モード切り替え色 */
    #btnOni {
        background: red;
        color: white;
    }
    #btnSearch {
        background: white;
        color: green;
        border: 2px solid green;
    }
</style>
</head>
<body>

<div class="container">

    <!-- 左側：5×4 スロット -->
    <div class="left">
        <div class="slot-row">
            <div class="slot">1a</div><div class="slot">1b</div><div class="slot">1c</div><div class="slot">1d</div>
        </div>
        <div class="slot-row">
            <div class="slot">2a</div><div class="slot">2b</div><div class="slot">2c</div><div class="slot">2d</div>
        </div>
        <div class="slot-row">
            <div class="slot">3a</div><div class="slot">3b</div><div class="slot">3c</div><div class="slot">3d</div>
        </div>
        <div class="slot-row">
            <div class="slot">4a</div><div class="slot">4b</div><div class="slot">4c</div><div class="slot">4d</div>
        </div>
        <div class="slot-row">
            <div class="slot">5a</div><div class="slot">5b</div><div class="slot">5c</div><div class="slot">5d</div>
        </div>
    </div>

    <!-- 右側：カメラ・ログ・ボタン -->
    <div class="right">

        <!-- カメラ -->
        <video id="cameraPreview" autoplay playsinline></video>

        <!-- ログ -->
        <div id="logBox"></div>

        <!-- ボタン4つ -->
        <button id="btnOni" class="button">お題読み取りモード</button>
        <button id="btnSearch" class="button">探索モード</button>
        <button id="btnCapture" class="button">撮影（長押し）</button>
        <button id="btnOther" class="button">その他</button>

    </div>

</div>

<script>
/* カメラ起動 */
async function startCamera() {
    const video = document.getElementById("cameraPreview");
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = stream;
        addLog("カメラ起動");
    } catch (e) {
        addLog("カメラエラー: " + e);
    }
}
startCamera();

/* ログ追記 */
function addLog(msg) {
    const box = document.getElementById("logBox");
    box.innerHTML += msg + "<br>";
    box.scrollTop = box.scrollHeight;
}

/* モード切り替え */
document.getElementById("btnOni").addEventListener("click", () => {
    document.getElementById("btnOni").style.background = "red";
    document.getElementById("btnOni").style.color = "white";

    document.getElementById("btnSearch").style.background = "white";
    document.getElementById("btnSearch").style.border = "2px solid green";
    document.getElementById("btnSearch").style.color = "green";

    addLog("お題読み取りモード ON");
});

document.getElementById("btnSearch").addEventListener("click", () => {
    document.getElementById("btnSearch").style.background = "green";
    document.getElementById("btnSearch").style.color = "white";
    document.getElementById("btnSearch").style.border = "2px solid green";

    document.getElementById("btnOni").style.background = "white";
    document.getElementById("btnOni").style.color = "red";
    document.getElementById("btnOni").style.border = "2px solid red";

    addLog("探索モード ON");
});
</script>

</body>
</html>
