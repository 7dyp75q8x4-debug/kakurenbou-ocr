<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>かくれんぼOCR</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #000;
        color: #fff;
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        overflow: hidden;
    }

    /* --------------- 画面全体の左右レイアウト --------------- */
    .container {
        display: flex;
        flex-direction: row;
        width: 100vw;
        height: 100vh;
    }

    /* ------------------- 左側（スロット） ------------------- */
    .left-area {
        width: 48vw;
        height: 100vh;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(5, 1fr);
        gap: 6px;
        padding: 6px;
        box-sizing: border-box;
    }

    .slot {
        border: 1px solid #555;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        background: #222;
    }

    /* ------------------- 右側エリア ------------------- */
    .right-area {
        width: 52vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        padding: 8px;
        box-sizing: border-box;
    }

    /* カメラ領域（画面上から1/4） */
    #camera-area {
        width: 100%;
        height: 25vh;
        background: #111;
        border-radius: 8px;
        overflow: hidden;
    }

    video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* ログ（高さ25%） */
    #log-area {
        width: 100%;
        height: 25vh;
        background: #222;
        border-radius: 8px;
        margin-top: 8px;
        padding: 6px;
        overflow-y: auto;
        font-size: 14px;
    }

    /* ボタン 4つ */
    .btn {
        width: 100%;
        padding: 14px 0;
        border-radius: 10px;
        text-align: center;
        font-size: 16px;
        margin-top: 10px;
        background: #fff;
        color: #000;
    }

    /* モードボタン色 */
    #btn-odai {
        background: #d93434; /* 赤 */
        color: #fff;
    }
    #btn-tansaku {
        background: #1fb043; /* 緑 */
        color: #fff;
    }

</style>
</head>

<body>

<div class="container">

    <!-- ------------------ 左スロット ------------------ -->
    <div class="left-area">
        <div class="slot">1a</div><div class="slot">1b</div><div class="slot">1c</div><div class="slot">1d</div>
        <div class="slot">2a</div><div class="slot">2b</div><div class="slot">2c</div><div class="slot">2d</div>
        <div class="slot">3a</div><div class="slot">3b</div><div class="slot">3c</div><div class="slot">3d</div>
        <div class="slot">4a</div><div class="slot">4b</div><div class="slot">4c</div><div class="slot">4d</div>
        <div class="slot">5a</div><div class="slot">5b</div><div class="slot">5c</div><div class="slot">5d</div>
    </div>

    <!-- ------------------ 右側 UI ------------------ -->
    <div class="right-area">

        <!-- カメラ表示 -->
        <div id="camera-area">
            <video id="camera" autoplay playsinline></video>
        </div>

        <!-- ログ -->
        <div id="log-area"></div>

        <!-- ボタン4つ -->
        <div id="btn-odai" class="btn">お題読み取りモード</div>
        <div id="btn-tansaku" class="btn">探索モード</div>
        <div id="btn-camera" class="btn">撮影（長押し）</div>
        <div id="btn-reset" class="btn">リセット</div>

    </div>
</div>

<script>
/* ---------------- カメラ起動 ---------------- */
async function startCamera() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "environment" },
            audio: false
        });
        document.getElementById("camera").srcObject = stream;
        addLog("カメラ起動");
    } catch (e) {
        addLog("カメラ起動失敗");
    }
}

/* ---------------- ログ追加 ---------------- */
function addLog(text) {
    const log = document.getElementById("log-area");
    log.innerHTML += text + "<br>";
    log.scrollTop = log.scrollHeight;
}

/* ---------------- ボタンイベント ---------------- */
document.getElementById("btn-odai").onclick = () => {
    addLog("モード切替：お題読み取り");
    document.getElementById("btn-odai").style.background = "#d93434";
    document.getElementById("btn-tansaku").style.background = "#fff";
    document.getElementById("btn-tansaku").style.color = "#000";
};
document.getElementById("btn-tansaku").onclick = () => {
    addLog("モード切替：探索モード");
    document.getElementById("btn-tansaku").style.background = "#1fb043";
    document.getElementById("btn-tansaku").style.color = "#fff";
    document.getElementById("btn-odai").style.background = "#fff";
    document.getElementById("btn-odai").style.color = "#000";
};

document.getElementById("btn-reset").onclick = () => {
    addLog("リセット");
};

startCamera();
</script>

</body>
</html>
