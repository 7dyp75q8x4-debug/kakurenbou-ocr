<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<style>
body {
    margin: 0;
    background: #111;
    color: white;
    font-family: sans-serif;
    overflow: hidden;
    display: flex;
}

/* ===== 左側 5×4 グリッド ===== */
#left {
    width: 55vw;
    padding: 4px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(5, 1fr);
    gap: 6px;
}
.slot {
    background: #222;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.4vw;
    user-select: none;
}

/* ===== 右側パネル ===== */
#right {
    width: 45vw;
    padding: 6px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    overflow: hidden;
    transform-origin: top right;
}

/* ===== カメラ（16:9固定で最大化） ===== */
#camera-container {
    width: 100%;
    background: #000;
    border-radius: 6px;
    position: relative;
}
#camera-view {
    width: 100%;
    aspect-ratio: 16 / 9;
    background: #000;
    border-radius: 6px;
    object-fit: cover;
}

/* ===== ログ ===== */
#log {
    margin-top: 8px;
    width: 100%;
    height: 12vh;
    background: #222;
    border-radius: 6px;
    padding: 6px;
    overflow-y: auto;
    font-size: 1.8vw;
}

/* ===== ボタン 2×2 ===== */
#buttons {
    margin-top: 8px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 8px;
    height: 24vh;
}
.btn {
    border-radius: 6px;
    border: none;
    font-size: 2vw;
    font-weight: 600;
    user-select: none;
}

/* 赤＆緑 */
#btn-odai { background: #ff6b6b; }
#btn-search { background: #3cb371; }
#btn-photo { background: #fff; color: #000; }
#btn-reset { background: #fff; color: #000; }

/* ===== 画面高さが溢れそうなら右だけ縮小 ===== */
@media (max-height: 800px) {
    #right { transform: scale(0.92); }
}
@media (max-height: 700px) {
    #right { transform: scale(0.85); }
}
</style>
</head>

<body>

<!-- 左側 5×4 -->
<div id="left">
    <div class="slot">1a</div><div class="slot">1b</div><div class="slot">1c</div><div class="slot">1d</div>
    <div class="slot">2a</div><div class="slot">2b</div><div class="slot">2c</div><div class="slot">2d</div>
    <div class="slot">3a</div><div class="slot">3b</div><div class="slot">3c</div><div class="slot">3d</div>
    <div class="slot">4a</div><div class="slot">4b</div><div class="slot">4c</div><div class="slot">4d</div>
    <div class="slot">5a</div><div class="slot">5b</div><div class="slot">5c</div><div class="slot">5d</div>
</div>

<!-- 右側 -->
<div id="right">

    <!-- カメラ -->
    <div id="camera-container">
        <video id="camera-view" autoplay playsinline></video>
    </div>

    <!-- ログ -->
    <div id="log">ログ表示</div>

    <!-- ボタン 2×2 -->
    <div id="buttons">
        <button id="btn-odai" class="btn">お題</button>
        <button id="btn-search" class="btn">探索</button>
        <button id="btn-photo" class="btn">撮影（長押し）</button>
        <button id="btn-reset" class="btn">リセット</button>
    </div>
</div>

<script>
/* ===== カメラ起動 ===== */
async function initCamera() {
    const view = document.getElementById("camera-view");
    try {
        const stream = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "environment" },
            audio: false
        });
        view.srcObject = stream;
    } catch (e) {
        console.log("Camera Error:", e);
    }
}
initCamera();
</script>

</body>
</html>
